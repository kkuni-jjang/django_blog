{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>블로그 목록</title>
    <link rel="stylesheet" href="{% static 'css/blog_list.css' %}">
</head>
<body>

<nav>
    <div class="logo">minji JJANG</div>
    <div>
        <a href="/">Home</a>
        <a href="/blog/">Blog</a>
        <a href="/about/">About Me</a>
    </div>
    <div>
        {% if user.is_authenticated %}
            <a href="/accounts/logout/">Log Out</a>
        {% else %}
            <a href="/accounts/login/">Log In</a>
        {% endif %}
    </div>
</nav>

<!-- 검색 폼 -->
<form method="get" action="{% url 'blog_list' %}" style="margin: 20px 0;">
    <input type="text" name="q" placeholder="검색어를 입력하세요" value="{{ query }}"
           style="padding: 8px 12px; font-size: 1rem; width: 200px;">
    <button type="submit" style="padding: 8px 16px; font-size: 1rem;">검색</button>
</form>

<h1>Blog</h1>

{% for post in posts %}
    <div class="card">
        {% if post.thumbnail %}
            <img src="{{ post.thumbnail.url }}" alt="{{ post.title }}">
        {% endif %}

        <div class="card-content">
            <h2><a href="{% url 'post_detail' post.pk %}">{{ post.title }}</a></h2>
            <p>{{ post.content|truncatewords:30 }}</p>

            <div class="tags">
                {% for tag in post.tags.all %}
                    <span class="tag">{{ tag.name }}</span>
                {% endfor %}
            </div>

            <a href="{% url 'post_detail' post.pk %}" class="read-more">Read More →</a>
            <div class="meta">
                <small>Posted on {{ post.created_at|date:"Y년 m월 d일" }} by {{ post.author }}</small>
            </div>
        </div>
    </div>
{% endfor %}

</body>
</html>
